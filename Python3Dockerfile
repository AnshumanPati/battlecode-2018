FROM alpine:3.7

# Install Python3
RUN apk add --update --no-cache \
    libffi-dev build-base \
    python3-dev && \
    python3 -m ensurepip && \
    rm -r /usr/lib/python*/ensurepip && \
    pip3 install --upgrade pip setuptools cffi && \
    rm -r /root/.cache

# Install battlecode bindings
ADD ./docker-artifacts/python/battlecode /usr/lib/python3.6/battlecode

RUN python3 -c 'import battlecode;print(battlecode.Direction.North.opposite())'